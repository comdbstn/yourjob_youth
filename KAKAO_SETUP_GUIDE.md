# 카카오 로그인 설정 가이드

## 🔧 카카오 개발자 콘솔 설정

### 1. 기본 정보
- **JavaScript 키**: `6e42255f9d680cf167b407714b27c0c2`
- **REST API 키**: `807b7374a502301dc64a7e5edd82019a`

### 2. 플랫폼 설정 (중요!)
카카오 개발자 콘솔(https://developers.kakao.com/)에서 다음 도메인들을 **Web 플랫폼**에 추가해야 합니다:

#### 개발환경 도메인
```
http://localhost:3000
```

#### 운영환경 도메인
```
https://yourjob-frontend-mm6hbqdwv-comdbstns-projects.vercel.app
```

### 3. 리다이렉트 URI 설정
카카오 로그인 → Redirect URI에 다음 주소들을 추가:

```
# 개발환경
http://localhost:3000/oauth/kakao/callback

# 운영환경
https://yourjob-frontend-mm6hbqdwv-comdbstns-projects.vercel.app/oauth/kakao/callback
```

### 4. 동의항목 설정
카카오 로그인 → 동의항목에서 다음 항목들을 설정:

#### 필수 동의 항목
- ✅ **닉네임** (필수 동의)
- ✅ **이메일** (필수 동의)

#### 선택 동의 항목 (옵션)
- ✅ **프로필 사진** (선택 동의)

## 🚀 현재 구현 상태

### ✅ 완료된 기능
1. **기본 ID/PW 로그인** - 완전 구현됨
2. **카카오 로그인 Frontend** - JavaScript SDK 통합 완료
3. **카카오 로그인 Backend** - `/api/auth/kakao-login` API 완료
4. **통합 인증 시스템** - 일반/카카오 계정 구분 관리
5. **리다이렉트 처리** - 콜백 페이지 구현

### 🔄 로그인 플로우

#### 일반 로그인
```
1. 사용자가 이메일/비밀번호 입력
2. POST /api/auth/login
3. 세션 토큰 발급
4. 로컬스토리지에 토큰 저장
5. 메인페이지로 리다이렉트
```

#### 카카오 로그인
```
1. 사용자가 "카카오로 로그인" 버튼 클릭
2. 카카오 JavaScript SDK 팝업 창 열림
3. 카카오 인증 완료
4. 카카오 사용자 정보 가져오기
5. POST /api/auth/kakao-login
6. 세션 토큰 발급
7. 로컬스토리지에 토큰 저장
8. 모달 닫기 및 페이지 새로고침
```

### 📝 테스트 방법

#### 1. 일반 로그인 테스트
```
이메일: test@yourjob.com
비밀번호: password123
```

#### 2. 카카오 로그인 테스트
- "카카오로 로그인" 버튼 클릭
- 카카오 계정으로 인증
- 자동으로 회원 생성 및 로그인

### 🛡️ 보안 및 예외 처리

#### 중복 계정 방지
- 일반 계정으로 가입한 이메일로 카카오 로그인 시도 시 → 에러 메시지
- 카카오 계정으로 가입한 사용자는 카카오로만 로그인 가능

#### 데이터 관리
```kotlin
// User 모델에 추가된 필드
provider: String = "LOCAL" // "LOCAL" 또는 "KAKAO"
providerId: String? = null // 카카오 사용자 ID
```

### 🎨 UI/UX 특징

#### 로그인 모달
- 깔끔한 탭 전환 (로그인/회원가입)
- 카카오 로그인 버튼 (노란색, 카카오 스타일)
- "또는" 구분선으로 소셜/일반 로그인 구분
- 테스트 계정 자동 입력 기능

#### 반응형 디자인
- 모바일/태블릿/데스크탑 완전 지원
- 터치 친화적 버튼 크기
- 접근성 고려한 포커스 처리

## 🔍 트러블슈팅

### 카카오 로그인이 안될 때
1. **개발자 콘솔 설정 확인**
   - 플랫폼 도메인이 정확한지 확인
   - 리다이렉트 URI가 정확한지 확인
   
2. **네트워크 오류**
   - 브라우저 개발자 도구에서 네트워크 탭 확인
   - CORS 에러 발생 시 백엔드 설정 확인

3. **JavaScript 오류**
   - 콘솔에서 카카오 SDK 로드 확인
   - API 키가 정확한지 확인

### 일반적인 에러 메시지
```
"카카오 로그인을 준비 중입니다" → SDK 로딩 중
"해당 이메일로 이미 가입된 계정이 있습니다" → 중복 계정
"카카오 로그인에 실패했습니다" → 인증 실패
```

## 📊 현재 시스템 상태

### 저장 방식
- **개발 단계**: 메모리 저장 (서버 재시작시 초기화)
- **향후 계획**: 데이터베이스 연동 예정

### 토큰 방식
- **현재**: UUID + 타임스탬프 조합
- **보안**: 세션 기반 토큰 관리
- **만료**: 수동 로그아웃 또는 서버 재시작

---

**🎉 모든 설정이 완료되면 카카오 로그인과 일반 로그인이 모두 정상 작동합니다!**